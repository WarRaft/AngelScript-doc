<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-04-30T22:31:55.860944"><title>Перегрузка | AngelScript</title><script type="application/json" id="virtual-toc-data">[{"id":"i3mli73_31445","level":0,"title":"Приведение типов","anchor":"#i3mli73_31445"},{"id":"const","level":0,"title":"const","anchor":"#const"},{"id":"i3mli73_31452","level":0,"title":"Ссылки","anchor":"#i3mli73_31452"},{"id":"i3mli73_31455","level":0,"title":"Числа","anchor":"#i3mli73_31455"},{"id":"i3mli73_31554","level":0,"title":"Поиск функции","anchor":"#i3mli73_31554"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Перегрузка | AngelScript"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="AngelScript Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/function-overload.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Перегрузка | AngelScript"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/function-overload.html#webpage",
    "url": "writerside-documentation/function-overload.html",
    "name": "Перегрузка | AngelScript",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "AngelScript Help"
}</script><!-- End Schema.org --></head><body data-id="function_overload" data-main-title="Перегрузка" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="function.md|Функции"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>AngelScript  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="function_overload" id="function_overload.md">Перегрузка</h1><p id="i3mli73_31439">Объявление нескольких функций в одном пространстве имён с одинаковым именем и различным набором аргументов называется <a href="https://learn.microsoft.com/en-us/cpp/cpp/function-overloading?view=msvc-170" id="i3mli73_31440" data-external="true" rel="noopener noreferrer">перегрузкой функции</a>.</p><div class="code-block" data-lang="cpp">
void Log(string Msg){}
void Log(int Msg){}

void main(){
    Log(&quot;1&quot;); // Будет вызвана: void Log(string Msg)
    Log(1); // Будет вызвана: void Log(int Msg)
}
</div><p id="i3mli73_31443">Перегрузки размечаются на этапе компиляции и компилятор пытается найти самую подходящую функцию для вызова основываясь на <a href="data-types.html" id="i3mli73_31444" data-tooltip="Типы данных">типах</a> параметров. Тип возвращаемого значения не влияет на выбор функции.</p><section class="chapter"><h2 id="i3mli73_31445" data-toc="i3mli73_31445">Приведение типов</h2><p id="i3mli73_31446">При передаче аргумента в функцию происходит неявное приведение типов:</p><div class="code-block" data-lang="cpp">
void A(int64 B){
    print(B);
}
void main(){
    A(1); // Передаём числовой литерал, который расценивается как int32
}
</div><p id="i3mli73_31448">При выборе подходящей функции происходит подсчёт стоимости преобразования каждого аргумента. Если по итогу окажется две функции с одинаковой стоимостью, то будет сгенерирована ошибка.</p></section><section class="chapter"><h2 id="const" data-toc="const">const</h2><p id="i3mli73_31449">Стоимость <code class="code" id="i3mli73_31450">const</code> учитывается при расчёте, но при идентичных типах приводит к неоднозначности.</p><div class="code-block" data-lang="cpp">
void A(int B){}
void A(const int B){}
void main(){
    A(1); //Ошибка! Две функции подходят под условие перегрузки
}
</div></section><section class="chapter"><h2 id="i3mli73_31452" data-toc="i3mli73_31452">Ссылки</h2><p id="i3mli73_31453">Ссылки учитываются при расчёте, но при идентичных типах приводят к неоднозначности.</p><div class="code-block" data-lang="cpp">
void A(int B){}
void A(int&amp; B){}
void main(){
A(1); //Ошибка! Две функции подходят под условие перегрузки
}
</div></section><section class="chapter"><h2 id="i3mli73_31455" data-toc="i3mli73_31455">Числа</h2><p id="i3mli73_31456">Все числа совместимы. В некоторых случаях с потерей байт или изменением значения.</p><p id="i3mli73_31457">Преобразования происходят в следующем порядке.</p><div class="table-wrapper"><table class="wide" id="i3mli73_31458"><thead><tr class="ijRowHead" id="i3mli73_31459"><th id="i3mli73_31460"><p>Преобразование</p></th><th id="i3mli73_31461"><p>Пример</p></th></tr></thead><tbody><tr id="i3mli73_31462"><td id="i3mli73_31463"><p><a href="enum.html" id="i3mli73_31464" data-tooltip="Именованные числа, служащие для удобного указания набора значений.">Перечисление</a> в <a href="integer.html" id="i3mli73_31465" data-tooltip="Набор чисел, который включает все натуральные числа, их отрицательные обратные и ноль.">целое число</a> того же размера</p></td><td id="i3mli73_31466"><p><code class="code" id="i3mli73_31467">enum</code> ➡ <code class="code" id="i3mli73_31468">int32</code></p></td></tr><tr id="i3mli73_31469"><td id="i3mli73_31470"><p><a href="enum.html" id="i3mli73_31471" data-tooltip="Именованные числа, служащие для удобного указания набора значений.">Перечисление</a> в <a href="integer.html" id="i3mli73_31472" data-tooltip="Набор чисел, который включает все натуральные числа, их отрицательные обратные и ноль.">целое число</a> другого размера</p></td><td id="i3mli73_31473"><p><code class="code" id="i3mli73_31474">enum</code> ➡ <code class="code" id="i3mli73_31475">int64</code></p></td></tr><tr id="i3mli73_31476"><td id="i3mli73_31477"><p>Увеличение размерности числа</p></td><td id="i3mli73_31478"><p><code class="code" id="i3mli73_31479">float</code> ➡ <code class="code" id="i3mli73_31480">double</code></p></td></tr><tr id="i3mli73_31481"><td id="i3mli73_31482"><p>Уменьшение размерности числа</p></td><td id="i3mli73_31483"><p><code class="code" id="i3mli73_31484">int64</code> ➡ <code class="code" id="i3mli73_31485">int32</code></p></td></tr><tr id="i3mli73_31486"><td id="i3mli73_31487"><p><span class="emphasis" id="i3mli73_31488">Знаковое</span> целое в <span class="emphasis" id="i3mli73_31489">беззнаковое</span></p></td><td id="i3mli73_31490"><p><code class="code" id="i3mli73_31491">int32</code> ➡ <code class="code" id="i3mli73_31492">uint32</code></p></td></tr><tr id="i3mli73_31493"><td id="i3mli73_31494"><p><span class="emphasis" id="i3mli73_31495">Беззнаковое</span> целое в <span class="emphasis" id="i3mli73_31496">знаковое</span></p></td><td id="i3mli73_31497"><p><code class="code" id="i3mli73_31498">uint32</code> ➡ <code class="code" id="i3mli73_31499">int32</code></p></td></tr><tr id="i3mli73_31500"><td id="i3mli73_31501"><p><span class="emphasis" id="i3mli73_31502">Целочисленное</span> в <span class="emphasis" id="i3mli73_31503">вещественное</span></p></td><td id="i3mli73_31504"><p><code class="code" id="i3mli73_31505">int32</code> ➡ <code class="code" id="i3mli73_31506">float</code></p></td></tr><tr id="i3mli73_31507"><td id="i3mli73_31508"><p><span class="emphasis" id="i3mli73_31509">Вещественное</span> в <span class="emphasis" id="i3mli73_31510">целочисленное</span></p></td><td id="i3mli73_31511"><p><code class="code" id="i3mli73_31512">double</code> ➡ <code class="code" id="i3mli73_31513">int64</code></p></td></tr></tbody></table></div><p id="i3mli73_31514">Преобразования происходят последовательно, ниже приведено несколько примеров.</p><div class="table-wrapper"><table class="wide" id="i3mli73_31515"><thead><tr class="ijRowHead" id="i3mli73_31516"><th id="i3mli73_31517"><p>Цель преобразования</p></th><th id="i3mli73_31518"><p>Цепочка преобразования</p></th></tr></thead><tbody><tr id="i3mli73_31519"><td id="i3mli73_31520"><p><code class="code" id="i3mli73_31521">enum</code> ➡ <code class="code" id="i3mli73_31522">int64</code></p></td><td id="i3mli73_31523"><p><code class="code" id="i3mli73_31524">enum</code> ➡ <code class="code" id="i3mli73_31525">int64</code></p></td></tr><tr id="i3mli73_31526"><td id="i3mli73_31527"><p><code class="code" id="i3mli73_31528">int8</code> ➡ <code class="code" id="i3mli73_31529">uint64</code></p></td><td id="i3mli73_31530"><p><code class="code" id="i3mli73_31531">int8</code> ➡ <code class="code" id="i3mli73_31532">int16</code> ➡ <code class="code" id="i3mli73_31533">int32</code>➡ <code class="code" id="i3mli73_31534">int64</code> ➡ <code class="code" id="i3mli73_31535">uint64</code></p></td></tr><tr id="i3mli73_31536"><td id="i3mli73_31537"><p><code class="code" id="i3mli73_31538">double</code> ➡ <code class="code" id="i3mli73_31539">uint16</code></p></td><td id="i3mli73_31540"><p><code class="code" id="i3mli73_31541">double</code> ➡ <code class="code" id="i3mli73_31542">int64</code>➡ <code class="code" id="i3mli73_31543">int32</code> ➡ <code class="code" id="i3mli73_31544">int16</code> ➡ <code class="code" id="i3mli73_31545">uint16</code></p></td></tr><tr id="i3mli73_31546"><td id="i3mli73_31547"><p><code class="code" id="i3mli73_31548">int32</code> ➡ <code class="code" id="i3mli73_31549">uint64</code></p></td><td id="i3mli73_31550"><p><code class="code" id="i3mli73_31551">int32</code> ➡ <code class="code" id="i3mli73_31552">int64</code>➡ <code class="code" id="i3mli73_31553">uint64</code></p></td></tr></tbody></table></div></section><section class="chapter"><h2 id="i3mli73_31554" data-toc="i3mli73_31554">Поиск функции</h2><p id="i3mli73_31555">После нахождения всех подходящих функций для каждой позиции аргумента будет построен список подходящих функций. Возьмём для примера несколько функций:</p><div class="code-block" data-lang="cpp">
void A(int8 B, int16 C, int32 D){}; // I
void A(int32 B, int16 C, int8 D){}; // II
void A(string B, int16 C, int8 D){}; // III
</div><div class="tabs" id="i3mli73_31557" data-anchors="[i3mli73_31558,i3mli73_31604]"><div class="tabs__content" data-gtm="tab" id="i3mli73_31558" data-title="Пример 1"><div class="code-block" data-lang="cpp" data-title="C++">
A(int16(1), int16(1), int32(1));
</div><div class="table-wrapper"><table class="wide" id="i3mli73_31560"><thead><tr class="ijRowHead" id="i3mli73_31561"><th id="i3mli73_31562"><p><code class="code" id="i3mli73_31563">int16</code></p></th><th id="i3mli73_31564"><p><code class="code" id="i3mli73_31565">int16</code></p></th><th id="i3mli73_31566"><p><code class="code" id="i3mli73_31567">int32</code></p></th><th id="i3mli73_31568"><p>➡</p></th></tr></thead><tbody><tr id="i3mli73_31569"><td id="i3mli73_31570"><p><code class="code" id="i3mli73_31571">I</code>: <code class="code" id="i3mli73_31572">int16</code> ➡ <code class="code" id="i3mli73_31573">int8</code></p></td><td id="i3mli73_31574"><p><code class="code" id="i3mli73_31575">I</code></p></td><td id="i3mli73_31576"><p><code class="code" id="i3mli73_31577">I</code></p></td><td id="i3mli73_31578"><p>1</p></td></tr><tr id="i3mli73_31579"><td id="i3mli73_31580"><p><code class="code" id="i3mli73_31581">II</code>: <code class="code" id="i3mli73_31582">int16</code> ➡ <code class="code" id="i3mli73_31583">int32</code></p></td><td id="i3mli73_31584"><p><code class="code" id="i3mli73_31585">II</code></p></td><td id="i3mli73_31586"><p><code class="code" id="i3mli73_31587">II</code>: <code class="code" id="i3mli73_31588">int32</code> ➡ <code class="code" id="i3mli73_31589">int16</code> ➡ <code class="code" id="i3mli73_31590">int8</code></p></td><td id="i3mli73_31591"><p>3</p></td></tr><tr id="i3mli73_31592"><td id="i3mli73_31593"><p>❌</p></td><td id="i3mli73_31594"><p><code class="code" id="i3mli73_31595">III</code></p></td><td id="i3mli73_31596"><p><code class="code" id="i3mli73_31597">III</code>: <code class="code" id="i3mli73_31598">int32</code> ➡ <code class="code" id="i3mli73_31599">int16</code> ➡ <code class="code" id="i3mli73_31600">int8</code></p></td><td id="i3mli73_31601"><p>❌</p></td></tr></tbody></table></div><p id="i3mli73_31602">Наименьшее количество преобразований имеет <code class="code" id="i3mli73_31603">I</code>, он и будет вызван.</p></div><div class="tabs__content" data-gtm="tab" id="i3mli73_31604" data-title="Пример 2"><div class="code-block" data-lang="cpp" data-title="C++">
A(int16(1), uint16(1), int16(1));
</div><div class="table-wrapper"><table class="wide" id="i3mli73_31606"><thead><tr class="ijRowHead" id="i3mli73_31607"><th id="i3mli73_31608"><p><code class="code" id="i3mli73_31609">int16</code></p></th><th id="i3mli73_31610"><p><code class="code" id="i3mli73_31611">uint16</code></p></th><th id="i3mli73_31612"><p><code class="code" id="i3mli73_31613">int16</code></p></th><th id="i3mli73_31614"><p>➡</p></th></tr></thead><tbody><tr id="i3mli73_31615"><td id="i3mli73_31616"><p><code class="code" id="i3mli73_31617">I</code>: <code class="code" id="i3mli73_31618">int16</code> ➡ <code class="code" id="i3mli73_31619">int8</code></p></td><td id="i3mli73_31620"><p><code class="code" id="i3mli73_31621">I</code>: <code class="code" id="i3mli73_31622">int16</code> ➡ <code class="code" id="i3mli73_31623">uint16</code></p></td><td id="i3mli73_31624"><p><code class="code" id="i3mli73_31625">I</code>: <code class="code" id="i3mli73_31626">int16</code> ➡ <code class="code" id="i3mli73_31627">int32</code></p></td><td id="i3mli73_31628"><p>3</p></td></tr><tr id="i3mli73_31629"><td id="i3mli73_31630"><p><code class="code" id="i3mli73_31631">II</code>: <code class="code" id="i3mli73_31632">int16</code> ➡ <code class="code" id="i3mli73_31633">int32</code></p></td><td id="i3mli73_31634"><p><code class="code" id="i3mli73_31635">II</code>: <code class="code" id="i3mli73_31636">int16</code> ➡ <code class="code" id="i3mli73_31637">uint16</code></p></td><td id="i3mli73_31638"><p><code class="code" id="i3mli73_31639">II</code>: <code class="code" id="i3mli73_31640">int16</code> ➡ <code class="code" id="i3mli73_31641">int8</code></p></td><td id="i3mli73_31642"><p>3</p></td></tr><tr id="i3mli73_31643"><td id="i3mli73_31644"><p>❌</p></td><td id="i3mli73_31645"><p><code class="code" id="i3mli73_31646">III</code>: <code class="code" id="i3mli73_31647">int16</code> ➡ <code class="code" id="i3mli73_31648">uint16</code></p></td><td id="i3mli73_31649"><p><code class="code" id="i3mli73_31650">III</code>: <code class="code" id="i3mli73_31651">int16</code> ➡ <code class="code" id="i3mli73_31652">int8</code></p></td><td id="i3mli73_31653"><p>❌</p></td></tr></tbody></table></div><p id="i3mli73_31654">Две функции с одинаковым количеством преобразований приведут к неоднозначности и будет сгенерирована ошибка.</p></div></div></section><div class="last-modified">Last modified: 30 April 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="funcdef.html" class="navigation-links__prev">funcdef</a><a href="lambda.html" class="navigation-links__next">Анонимные функции</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.js"></script></body></html>